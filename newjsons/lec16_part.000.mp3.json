{
    "chunks": [
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 0.0,
            "end": 36.72,
            "text": " Hi everyone, we're going to get started now.  So this week's lecture is really picking up where last week's left off.  You might remember we spent the last week talking about Pablo and Friends, and I told  you how for last week we were just going to focus on the one-time step setting.  Well as we know, lots of medicine has to do with multiple sequential decisions across"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 36.72,
            "end": 60.04,
            "text": " time, and that'll be the focus of this whole week's worth of discussions.  And as I thought about really what should I teach in this lecture, I realized that the  person who knew the most about the topic was in fact a postdoctoral researcher in my lab.  Most about this topic and you know the general idea of other medical fields.  I'll take it, I'll take that, I'll take that."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 60.04,
            "end": 84.36,
            "text": " It's very fair, it's very fair.  And so I invited him to come to us today to give this as an invited lecture, and this  is Frederik Johansen, he'll be a professor in Chalmers in Sweden starting in September.  Thank you so much David, that's very generous.  So as David mentioned last time, we looked a lot at causal effects, and that's where"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 84.4,
            "end": 105.76,
            "text": " we will start this discussion too.  So I'll just start with this reminder here, we essentially introduced four quantities  last time, or the last two lectures as far as I know.  We had two potential outcomes which represented the outcomes that we would see of some treatment  choice under the various choices, or the two different choices, one and zero."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 105.76,
            "end": 129.12,
            "text": " And we had two covariates, or sorry, we had a set of covariates, X and a treatment T.  And we were interested in essentially what is the effect of this treatment T on the outcome  Y given the covariates X. And the effect that we focused on that time was the conditional  average treatment effect, which is exactly the difference between these potential outcomes  conditioned on the features."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 129.12,
            "end": 153.88000000000002,
            "text": " So the whole last week was about trying to identify this quantity using various methods.  And the question that didn't come up so much, or one question that didn't come up so much  is how do we use this quantity?  We might be interested in it just in terms of its absolute magnitude, how large is the  effect, but we might also be interested in designing a policy for how to treat our patients"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 153.88000000000002,
            "end": 175.88,
            "text": " based on this quantity.  So today, we will focus on policies.  And what I mean by that specifically is something that takes into account what we know about  a patient and produces a choice or an action as an output.  Typically we'll think of policies as depending on medical history, perhaps which treatments"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 175.88,
            "end": 194.48,
            "text": " they have received previously, what state is the patient currently in.  But we can also base it purely on this number that we produced last time, the conditional  average treatment effect.  And one very natural policy is to say pi of X is equal to the indicator function representing  if this case is positive."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 195.04,
            "end": 215.83999999999997,
            "text": " So if the effect is positive, we treat the patient.  If the effect is negative, we don't.  And of course, positive will be relative to the usefulness of the outcome being high.  But yeah, this is a very natural policy to consider.  However, we can also think about much more complicated policies that are not just based"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 215.83999999999997,
            "end": 231.72,
            "text": " on this number, the quality of the outcome.  We can think about policies that take into account legislation or cost of medication  or side effects.  We're not going to do that today, but that's something that you can keep in mind as we  discuss these things."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 231.72,
            "end": 251.36,
            "text": " So David mentioned we should now move from the one-step setting where we have a single  treatment acting at a single time.  And we only have to take into account the state of a patient once, basically.  And we will move from that to the sequential setting.  My first example of such a setting is sepsis management."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 251.36,
            "end": 272.3,
            "text": " So sepsis is a complication of an infection, which can have very disastrous consequences.  It can lead to organ failure and ultimately death.  And it's actually one of the leading causes of deaths in the ICU.  So it's, of course, important that we can manage and treat this condition.  When you start treating sepsis, the primary target, the first thing you should think about"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 272.3,
            "end": 290.86,
            "text": " fixing is the infection itself.  If we don't treat the infection, things are going to keep being bad.  But even if we figure out the right antibiotic to treat the infection that is the source  of the septic shock or the septic inflammation, there are a lot of different conditions that  we need to manage."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 290.86,
            "end": 319.38,
            "text": " Because the infection itself can lead to fever, breathing difficulties, low blood pressure,  high heart rate, all these kinds of things that are symptoms but not the cause themselves.  So we still have to manage them somehow so that the patient survives and is comfortable.  So when I say sepsis management, I'm talking about managing such quantities over time,  over a patient's stay in the hospital."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 319.38,
            "end": 340.04,
            "text": " So last time, again, just to really hammer this in, we talked about potential outcomes  and the choice of a single treatment.  So we can think about this in the septic setting as a patient coming in or a patient already  being in the hospital, presumably, and is presenting with breathing difficulties.  So that means that their blood oxygen will be low because they can't breathe on their"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 340.04,
            "end": 359.72,
            "text": " own, and we might want to put them on mechanical ventilation so that we can ensure that they  get sufficient oxygen.  We can view this as a single choice.  Should we put the patient on mechanical ventilation or not?  But what we need to take into account here is what will happen after we make that choice."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 359.72,
            "end": 378.6,
            "text": " What will be the side effects of this choice going further?  Because we want to make sure that the patient is comfortable and in good health throughout  their stay.  So today, we will move towards sequential decision making.  And in particular, what I alluded to just now is that decisions made in sequence may"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 378.6,
            "end": 400.59999999999997,
            "text": " have the property that choices early on rule out certain choices later.  We'll see an example of that very, very soon.  In particular, we'll be interested in coming up with a policy for making decisions repeatedly  that optimizes a given outcome, something that we care about.  It could minimize the risk of death."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 400.59999999999997,
            "end": 420.0,
            "text": " It could be a reward that says that the vitals of a patient are in the right range.  You might want to optimize that.  But essentially, think about it now as having this choice of administering a medication  or an intervention at any time t and having the best policy for doing so.  OK."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 420.0,
            "end": 439.79999999999995,
            "text": " I'm going to skip that one.  So I mentioned already one potential choice that we might want to make in the management  of a septic patient, which is to put them on mechanical ventilation because they can't  breathe on their own.  A side effect of doing so is that they might suffer discomfort from being intubated."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 440.8,
            "end": 456.44,
            "text": " And the procedure is not painless.  It's not without discomfort.  So something that you might have to do, putting them on mechanical ventilation, is to sedate  the patient.  So this is an action that is informed by the previous action because if we didn't put the"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 456.44,
            "end": 480.56,
            "text": " patient on mechanical ventilation, maybe we wouldn't consider them for sedation.  When we sedate a patient, we run the risk of lowering their blood pressure.  So we might need to manage that, too.  So if their blood pressure gets too low, maybe we need to administer vasopressors, which  artificially raise the blood pressure, or fluids or anything else that takes care of"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 480.56,
            "end": 504.04,
            "text": " this issue.  So just think of this as an example of choices cascading in terms of their consequences as  we roll forward in time.  Ultimately, we will face the end of the patient's stay.  And hopefully, we manage the patient in a successful way so that their response or their"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 504.04,
            "end": 527.92,
            "text": " outcome is a good one.  What I'm illustrating here is that for any one patient in our hospitals or in the health  care system, we will only observe one trajectory through these options.  So I will show this type of illustration many, many times.  But I hope you can realize the scope of the decision space here."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 527.92,
            "end": 553.16,
            "text": " Essentially, at any point, we can choose a different action.  And usually, the number of decisions that we make in an ICU setting, for example, is  much larger than we could ever test in a randomized trial.  Think of all of these different trajectories as being different arms in a randomized control  trial that you want to compare the effects or the outcomes of."
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 553.16,
            "end": 582.36,
            "text": " It's infeasible to run such a trial, typically.  So one of the big reasons that we are talking about reinforcement learning today and talking  about learning policies rather than causal effects in the setup that we did last week  is because the space of possible action trajectories is so large.  So having said that, we now turn to trying to find, essentially, the policy that picks"
        },
        {
            "number": "lec16",
            "title": "part.000.mp3",
            "start": 582.36,
            "end": 599.04,
            "text": " this orange path here that leads to a good outcome.  And to reason about such a thing, we need to also reason about what is a good outcome.  What is a good reward for our agent as it proceeds through time and makes choices?"
        }
    ],
    "text": " Hi everyone, we're going to get started now. So this week's lecture is really picking up where last week's left off. You might remember we spent the last week talking about Pablo and Friends, and I told you how for last week we were just going to focus on the one-time step setting. Well as we know, lots of medicine has to do with multiple sequential decisions across time, and that'll be the focus of this whole week's worth of discussions. And as I thought about really what should I teach in this lecture, I realized that the person who knew the most about the topic was in fact a postdoctoral researcher in my lab. Most about this topic and you know the general idea of other medical fields. I'll take it, I'll take that, I'll take that. It's very fair, it's very fair. And so I invited him to come to us today to give this as an invited lecture, and this is Frederik Johansen, he'll be a professor in Chalmers in Sweden starting in September. Thank you so much David, that's very generous. So as David mentioned last time, we looked a lot at causal effects, and that's where we will start this discussion too. So I'll just start with this reminder here, we essentially introduced four quantities last time, or the last two lectures as far as I know. We had two potential outcomes which represented the outcomes that we would see of some treatment choice under the various choices, or the two different choices, one and zero. And we had two covariates, or sorry, we had a set of covariates, X and a treatment T. And we were interested in essentially what is the effect of this treatment T on the outcome Y given the covariates X. And the effect that we focused on that time was the conditional average treatment effect, which is exactly the difference between these potential outcomes conditioned on the features. So the whole last week was about trying to identify this quantity using various methods. And the question that didn't come up so much, or one question that didn't come up so much is how do we use this quantity? We might be interested in it just in terms of its absolute magnitude, how large is the effect, but we might also be interested in designing a policy for how to treat our patients based on this quantity. So today, we will focus on policies. And what I mean by that specifically is something that takes into account what we know about a patient and produces a choice or an action as an output. Typically we'll think of policies as depending on medical history, perhaps which treatments they have received previously, what state is the patient currently in. But we can also base it purely on this number that we produced last time, the conditional average treatment effect. And one very natural policy is to say pi of X is equal to the indicator function representing if this case is positive. So if the effect is positive, we treat the patient. If the effect is negative, we don't. And of course, positive will be relative to the usefulness of the outcome being high. But yeah, this is a very natural policy to consider. However, we can also think about much more complicated policies that are not just based on this number, the quality of the outcome. We can think about policies that take into account legislation or cost of medication or side effects. We're not going to do that today, but that's something that you can keep in mind as we discuss these things. So David mentioned we should now move from the one-step setting where we have a single treatment acting at a single time. And we only have to take into account the state of a patient once, basically. And we will move from that to the sequential setting. My first example of such a setting is sepsis management. So sepsis is a complication of an infection, which can have very disastrous consequences. It can lead to organ failure and ultimately death. And it's actually one of the leading causes of deaths in the ICU. So it's, of course, important that we can manage and treat this condition. When you start treating sepsis, the primary target, the first thing you should think about fixing is the infection itself. If we don't treat the infection, things are going to keep being bad. But even if we figure out the right antibiotic to treat the infection that is the source of the septic shock or the septic inflammation, there are a lot of different conditions that we need to manage. Because the infection itself can lead to fever, breathing difficulties, low blood pressure, high heart rate, all these kinds of things that are symptoms but not the cause themselves. So we still have to manage them somehow so that the patient survives and is comfortable. So when I say sepsis management, I'm talking about managing such quantities over time, over a patient's stay in the hospital. So last time, again, just to really hammer this in, we talked about potential outcomes and the choice of a single treatment. So we can think about this in the septic setting as a patient coming in or a patient already being in the hospital, presumably, and is presenting with breathing difficulties. So that means that their blood oxygen will be low because they can't breathe on their own, and we might want to put them on mechanical ventilation so that we can ensure that they get sufficient oxygen. We can view this as a single choice. Should we put the patient on mechanical ventilation or not? But what we need to take into account here is what will happen after we make that choice. What will be the side effects of this choice going further? Because we want to make sure that the patient is comfortable and in good health throughout their stay. So today, we will move towards sequential decision making. And in particular, what I alluded to just now is that decisions made in sequence may have the property that choices early on rule out certain choices later. We'll see an example of that very, very soon. In particular, we'll be interested in coming up with a policy for making decisions repeatedly that optimizes a given outcome, something that we care about. It could minimize the risk of death. It could be a reward that says that the vitals of a patient are in the right range. You might want to optimize that. But essentially, think about it now as having this choice of administering a medication or an intervention at any time t and having the best policy for doing so. OK. I'm going to skip that one. So I mentioned already one potential choice that we might want to make in the management of a septic patient, which is to put them on mechanical ventilation because they can't breathe on their own. A side effect of doing so is that they might suffer discomfort from being intubated. And the procedure is not painless. It's not without discomfort. So something that you might have to do, putting them on mechanical ventilation, is to sedate the patient. So this is an action that is informed by the previous action because if we didn't put the patient on mechanical ventilation, maybe we wouldn't consider them for sedation. When we sedate a patient, we run the risk of lowering their blood pressure. So we might need to manage that, too. So if their blood pressure gets too low, maybe we need to administer vasopressors, which artificially raise the blood pressure, or fluids or anything else that takes care of this issue. So just think of this as an example of choices cascading in terms of their consequences as we roll forward in time. Ultimately, we will face the end of the patient's stay. And hopefully, we manage the patient in a successful way so that their response or their outcome is a good one. What I'm illustrating here is that for any one patient in our hospitals or in the health care system, we will only observe one trajectory through these options. So I will show this type of illustration many, many times. But I hope you can realize the scope of the decision space here. Essentially, at any point, we can choose a different action. And usually, the number of decisions that we make in an ICU setting, for example, is much larger than we could ever test in a randomized trial. Think of all of these different trajectories as being different arms in a randomized control trial that you want to compare the effects or the outcomes of. It's infeasible to run such a trial, typically. So one of the big reasons that we are talking about reinforcement learning today and talking about learning policies rather than causal effects in the setup that we did last week is because the space of possible action trajectories is so large. So having said that, we now turn to trying to find, essentially, the policy that picks this orange path here that leads to a good outcome. And to reason about such a thing, we need to also reason about what is a good outcome. What is a good reward for our agent as it proceeds through time and makes choices?"
}